import type { SanityAssetDocument } from "@sanity/client";
import { imageBuilder } from "../sanity/lib/url-for-image";
import Picture from "./Picture.astro";

interface Props {
  images: SanityAssetDocument[];
}

const { images } = Astro.props;

export default function gallery() {
return <div class="gallery-container">
  <div class="masonry-grid" role="grid">
    {
      images.map((image, index) => {
        const isVertical = image.metadata.dimensions.aspectRatio < 1;
        return (
          <div
            class={`masonry-item ${isVertical ? "vertical" : "horizontal"}`}
            data-aspect-ratio={image.metadata.dimensions.aspectRatio}
            tabindex="0"
            aria-label={`Open image ${index + 1} in gallery`}
            role="button"
          >
            <Picture
              url={imageBuilder.image(image).url()}
              dimensions={[800, 1400, 1920]}
            />
          </div>
        );
      })
    }
  </div>
</div>
}



<script></script>

<style>
  .gallery-container {
    position: relative;
  }

  .masonry-grid {
    gap: 1rem; /* Uniform gap between rows and columns */
    display: grid;
    grid-template-columns: repeat(1, 1fr);
    align-content: start; /* Prevents stretching */
  }

  @media (min-width: 600px) {
    .masonry-grid {
      grid-template-columns: repeat(1, 1fr);
    }
  }

  @media (min-width: 900px) {
    .masonry-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }

  @media (min-width: 1200px) {
    .masonry-grid {
      grid-template-columns: repeat(3, 1fr);
    }
  }

  .masonry-item {
    display: block;
    overflow: hidden;
    border-radius: 0.5rem;
    cursor: pointer;
    transition: transform 0.2s ease;
    grid-row: span var(--row-span);
  }

  .masonry-item img {
    width: 100%;
    height: auto;
    object-fit: cover;
  }

  /* Vertical and Horizontal Images */
  .masonry-item.vertical {
    --row-span: 30; /* Adjust based on desired height */
  }

  .masonry-item.horizontal {
    --row-span: 15; /* Adjust based on desired height */
  }
</style> */}
